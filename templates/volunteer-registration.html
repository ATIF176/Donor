{% extends 'partials/index.html' %}
{% load static %}

{% block title %}
Register as a Donor
{% endblock title %}
{% block css %}
{% endblock css %}

{% block body %}
{% include "partials/navbar.html" %}
<section class="page-title bg-1">
	<div class="overlay"></div>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="block text-center">
					<span class="text-white">Register as a Donor</span>
					<h1 class="text-capitalize mb-5 text-lg">Donor Registration</h1>
				</div>
			</div>
		</div>
	</div>
</section>

<section class="section donor-registration ">
	<div class="container">
		<div class="row">
			<div class="col-lg-4">
				<div class="mt-3">
					<div class="feature-icon mb-3">
						<i class="icofont-support text-lg"></i>
					</div>
					<span class="h3">Need Assistance?</span>
					<h3 class="text-color mt-3">Contact Us: +315 *****56 </h2>
				</div>
				<div>
					<h1 class="text-capitalize mt-3 text-md">Blood Donor Eligibility Criteria</h1>
					<ul class="list-unstyled">
						<li class="mb-3"><i class="icofont-check mr-2"></i>Be in good general health and feeling well
						</li>
						<li class="mb-3"><i class="icofont-check mr-2"></i>Be at least 17 years old in most states</li>
						<li class="mb-3"><i class="icofont-check mr-2"></i>Have not donated blood in the last 56 days
						</li>
						<li class="mb-3"><i class="icofont-check mr-2"></i>Bring a valid photo ID</li>
						<li class="mb-3"><i class="icofont-check mr-2"></i>Bring list of medications you are taking</li>
						<li class="mb-3"><i class="icofont-check mr-2"></i>Recent surgery or tattoos temporary deferral
							for infection risk.</li>
						<li class="mb-3"><i class="icofont-check mr-2"></i>Donors should have a minimum weight of 110
							pounds (50 kg) to prevent undue strain during the donation process.</li>
						<li class="mb-3"><i class="icofont-check mr-2"></i>Additional weight requirements apply for
							donors
							18 years old and younger and all high school donors.</li>
						<li class="mb-3"><i class="icofont-check mr-2"></i>Recent travel to regions with a high risk of
							infectious diseases may result in temporary deferral</li>
				</div>
			</div>

			<div class="col-lg-8">
				<div class="registration-wrap mt-1 mt-lg-0 pl-lg-5">
					<h2 class="mb-2 title-color">Donor Registration Form</h2>
					<p class="mb-4">Thank you for considering becoming a blood donor. Please fill out the registration
						form below to get started.</p>
					<form id="donor-registration-form" method="post" enctype="multipart/form-data"
						action="{% url 'register' %}">
						{% csrf_token %}
						{{ form.non_field_errors }} <!-- Display non-field errors if any -->
						{{ form.errors }} <!-- Display form-level errors if any -->
						<div class="row">
							<div class="col-lg-6">
								<div class="form-group">
									<label for="fname">First Name</label>
									<input name="fname" id="fname" type="text" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="lname">Last Name</label>
									<input name="lname" id="lname" type="text" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="email">Email</label>
									<input name="email" id="email" type="email" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="city">Your Residential City</label>
									<input name="city" id="city" type="text" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="phone">Phone Number</label>
									<input name="phone" id="phone" type="text" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="donorid">Donor ID</label>
									<input name="donorid" id="donorid" type="text" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="dob">Date of Birth</label>
									<input name="dob" id="dob" type="date" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="ldonation">Last Donation</label>
									<input name="ldonation" id="ldonation" type="date" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="img">Profile Image</label>
									<input name="img" id="img" type="file" class="form-control">
								</div>
							</div>
							<div class="col-lg-6">
								<div class="form-group">
									<label for="bgroup">Blood Group</label>
									<select name="bgroup" id="bgroup" class="form-control">
										<option value="">Select Blood Group</option>
										<option value="A+">A+</option>
										<option value="A-">A-</option>
										<option value="B+">B+</option>
										<option value="B-">B-</option>
										<option value="O+">O+</option>
										<option value="O-">O-</option>
										<option value="AB+">AB+</option>
										<option value="AB-">AB-</option>
									</select>
								</div>
							</div>
						</div>
						<div class="form-group-2 mb-4">
							<label for="more">About Yourself</label>
							<textarea name="more" id="more" class="form-control" rows="6"
								placeholder="Write about yourself..."></textarea>
						</div>

						<button id="submit-button" class="btn btn-main btn-round-full" type="submit">Register
							<i class="icofont-simple-right ml-2"></i></button>
					</form>
				</div>
			</div>
		</div>
	</div>
</section>
{% include "partials/footer.html" %}
{% endblock body %}

{% block scripts %}
<script>
	document.addEventListener('DOMContentLoaded', function () {
		// Get references to form elements
		const lnameInput = document.getElementById('lname');
		const phoneInput = document.getElementById('phone');
		const donoridInput = document.getElementById('donorid');
		const form = document.getElementById('donor-registration-form'); // Get the form element

		// Add event listeners to the last name and phone inputs
		lnameInput.addEventListener('input', updateDonorId);
		phoneInput.addEventListener('input', updateDonorId);

		// Function to update donorid based on last name and last three digits of phone
		function updateDonorId() {
			const lname = lnameInput.value;
			const phone = phoneInput.value;

			// Extract the last three digits of the phone number
			const lastThreeDigits = phone.slice(-3);
			const firstThreealpha = lname.slice(0, 3);

			// Set donorid to last name + last three digits of phone
			donoridInput.value = firstThreealpha + lastThreeDigits;
		}

		// Submit the form when the button is clicked
		document.getElementById('submit-button').addEventListener('click', function () {
			form.submit();
		});
	});

</script>
{% endblock scripts %}